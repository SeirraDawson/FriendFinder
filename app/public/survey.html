<!DOCTYPE html>
<html lang="en">
<head>
  <meta "charset=UTF-8">
  <title>Friend Finder Survey Page</title>

  <!-- Latest compiled and minified CSS & JavaScript Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

  <!-- Font Awesome Glyphicons -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  <!-- Chosen -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>

</head>

<body>

  <div class="container">
    <!-- header -->
    <h2>Survey Questions</h2>
    <hr>

    <h3>
      <strong>About You</strong>
    </h3>

    <h4>Name (required)</h4>
    <input type="text" name="" id="name" class="form-control" required>
    <br>
    <h4>Link to Photo Image (required)</h4>
    <input type "text" name="" id="photo" class="form-control" required>
    <hr>

    <!-- Questions -->
    <h4>
      <strong>Question 1</strong>
    </h4>
    <h5>Your mind is always buzzing with unexplored ideas and plans.</h5>
    <select data-placeholder="" class="chosen-select" id="q1">
      <option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <br>
    <br>

    <h4>
      <strong>Question 2</strong>
    </h4>
    <h5>Generally speaking, you rely more on your experience than your imagination.
    </h5>
    <select data-placeholder="" class="chosen-select" id="q2">
      <option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <br>
    <br>

    <h4>
      <strong>Question 3</strong>
    </h4>
    <h5>You find it easy to stay relaxed and focused even when there is some pressure.
    </h5>
    <select data-placeholder="" class="chosen-select" id="q3">
      <option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <br>
    <br>

    <h4>
      <strong>Question 4</strong>
    </h4>
    <h5>You rarely do something just out of sheer curiosity.
    </h5>
    <select data-placeholder="" class="chosen-select" id="q4">
      <option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <br>
    <br>

    <h4>
      <strong>Question 5</strong>
    </h4>
    <h5>People can rarely upset you
    </h5>
    <select data-placeholder="" class="chosen-select" id="q5">
      <option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <br>
    <br>

    <h4>
      <strong>Question 6</strong>
    </h4>
    <h5>It is often difficult for you to relate to other people’s feelings.
    </h5>
    <select data-placeholder="" class="chosen-select" id="q6">
      <option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <br>
    <br>

    <h4>
      <strong>Question 7</strong>
    </h4>
    <h5>In a discussion, truth should be more important than people’s sensitivities.
    </h5>
    <select data-placeholder="" class="chosen-select" id="q7">
      <option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <br>
    <br>

    <h4>
      <strong>Question 8</strong>
    </h4>
    <h5>You rarely get carried away by fantasies and ideas.
    </h5>
    <select data-placeholder="" class="chosen-select" id="q8">
      <option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <br>
    <br>

    <h4>
      <strong>Question 9</strong>
    </h4>
    <h5>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.
    </h5>
    <select data-placeholder="" class="chosen-select" id="q9">
      <option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <br>
    <br>

    <h4>
      <strong>Question 10</strong>
    </h4>
    <h5>You feel more energetic after spending time with a group of people.
    </h5>
    <select data-placeholder="" class="chosen-select" id="q10">
      <option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <br>
    <br>

		<!-- Submit Button -->
		<button type="submit" class="btn btn-primary btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>
      Submit</button>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <p><a href="/api/friends">API Friends List</a>| <a href="https://github.com/SeirraDawson/FriendFinder/settings">GitHub Repo</a></p>
      </div>
    </footer>
  </div>

  <!-- Modal -->
	<div id="resultsModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h2 class="modal-title"><strong>Best Match</strong></h2>
        </div>
        <div class="modal-body">
          <h2 id="matchName"></h2>
          <img id="matchImg" src="..." alt="">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>


<!-- Send form data to our server -->
<script type="text/javascript">

  // In this code below we create the Front-end JavaScript which "POSTS" the form data to the express server.
  // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to the API.
  $(".submit").on("click", function() {
    event.preventDefault();

    // Form validation
    function validateForm() {
      var isValid  = true;
      $(".form-control").each(function(){
        if($(this).val()=== '')
          isValid = false;
      });
      $(".chosen-select").each(function(){
        if($(this).val() === "") {
          isValid = false;
        }
      });
      return isValid
    }

    // if required fields are completed
    if (validateForm() == true) {
      // create an object for the user's data
      var userData = {
        name: $("#name").val(),
        photo: $("#photo").val(),
        scores: [
          $("q1").val(),
          $("q2").val(),
          $("q3").val(),
          $("q4").val(),
          $("q5").val(),
          $("q6").val(),
          $("q7").val(),
          $("q8").val(),
          $("q9").val(),
          $("q10").val(),
        ]
      }

      // grab URL of website
      var currentURL = window.location.origin;

      // AJAX post the data to the friends API
      $.post(currentURL + "/api/friends", userData, function(data){

        //get the results from the AJAX post of the best match name & photo
        $("matchName").text(data.name);
        $("matchImg").attr("src", data.photo);

        // Display modal with the best match
        $("#resultsModal").modal("toggle");
      });
    } else {
      alert("Blank fields. Please fill out the entire field then submit!")
    }
    return false;

  });


  </script>

</body>
</html>
